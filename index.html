<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multi UPI QR Generator (No Logo)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

<!-- ðŸ” Password Protection -->
<script>
const PASSWORD = "Hack123xyz";
const user = prompt("Enter Password");
if (user !== PASSWORD) {
  alert("Access Denied");
  document.body.innerHTML = "";
}
</script>

<!-- jQuery + QR -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lrsjng.jquery-qrcode/0.14.0/jquery-qrcode.min.js"></script>

<style>
*{box-sizing:border-box}
html,body{margin:0;padding:0;width:100%}
body{font-family:Arial,sans-serif;background:#f2f4f8;padding:12px}
.container{width:100%;max-width:1100px;margin:auto;background:#fff;padding:14px;border-radius:14px}
h2{margin:0 0 10px;font-size:20px}
textarea{width:100%;min-height:120px;padding:12px;font-size:15px;border-radius:8px;border:1px solid #ccc;resize:vertical}
.actions{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
button{width:100%;padding:14px;background:#5f259f;color:#fff;border:none;border-radius:8px;font-size:15px;cursor:pointer}
button.green{background:#198754}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px;margin-top:16px}
.card{background:#faf7fd;padding:12px;border-radius:12px;text-align:center}
.card p{margin:8px 0;font-size:13px;font-weight:bold;word-break:break-all}
.card button{padding:10px;font-size:13px}

/* Responsive */
@media(max-width:360px){
  h2{font-size:18px}
  .actions{grid-template-columns:1fr}
  .grid{grid-template-columns:1fr}
}
@media(min-width:361px) and (max-width:600px){
  .actions{grid-template-columns:1fr}
  .grid{grid-template-columns:repeat(2,1fr)}
}
@media(min-width:601px) and (max-width:900px){
  .grid{grid-template-columns:repeat(3,1fr)}
}
@media(min-width:901px){
  .grid{grid-template-columns:repeat(4,1fr)}
}
</style>
</head>

<body>

<div class="container">
  <h2>Multiple UPI QR Generator</h2>

  <textarea id="upiList" placeholder="paytm.s1enrsw@pty
shop1@ybl
mobilecare@upi"></textarea>

  <div class="actions">
    <button onclick="generateMultipleQR()">Generate QR Codes</button>
    <button class="green" onclick="downloadAllQRs()">Download All QRs</button>
  </div>

  <div class="grid" id="qrContainer"></div>
</div>

<script>
function getQRSize(){
  const w = window.innerWidth;
  if(w < 360) return 160;
  if(w < 600) return 180;
  if(w < 900) return 200;
  return 220;
}

function generateMultipleQR(){
  $("#qrContainer").html("");
  const size = getQRSize();

  const upis = $("#upiList").val()
    .split("\n")
    .map(u => u.trim())
    .filter(u => u !== "");

  upis.forEach((upi, i) => {
    const box = $(`
      <div class="card">
        <div id="qr_${i}"></div>
        <p>${upi}</p>
        <button onclick="downloadQR('qr_${i}','${upi}')">Download</button>
      </div>
    `);
    $("#qrContainer").append(box);

    /* âœ… STATIC MERCHANT PAYLOAD â€“ SAFE FOR SCAN */
    const payload =
      "upi://pay?pa=" + encodeURIComponent(upi) +
      "&pn=" + encodeURIComponent("Mobile Store") +
      "&mc=0000" +
      "&mode=02" +
      "&cu=INR";

    $("#qr_" + i).qrcode({
      width:size,
      height:size,
      text:payload
    });
  });
}

function downloadQR(id, upi){
  const canvas = $("#" + id + " canvas")[0];
  const link = document.createElement("a");
  link.download = upi + ".png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}

function downloadAllQRs(){
  const qrDivs = document.querySelectorAll("[id^='qr_']");
  if(!qrDivs.length){
    alert("Generate QR codes first");
    return;
  }
  qrDivs.forEach((qrDiv, index) => {
    const canvas = qrDiv.querySelector("canvas");
    const upi = qrDiv.nextElementSibling.innerText;
    setTimeout(() => {
      const link = document.createElement("a");
      link.download = upi + ".png";
      link.href = canvas.toDataURL("image/png");
      link.click();
    }, index * 300);
  });
}
</script>

</body>
</html>
